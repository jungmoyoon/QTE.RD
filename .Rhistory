xc <- ddk_2011$percentile[ddk_2011$tracking==1]
dc <- ddk_2011$highstream[ddk_2011$tracking==1]
A <- rd.qte(y=yc,x=xc,d=dc,x0=50,z0=NULL,tau=(1:9/10),bdw=20,cov=0,bias=1)
summary(A,alpha=0.1)
library(devtools)
load_all()
usethis::use_testthat(3)
usethis::use_test("rd.qte")
usethis::use_test("rd.qte.R")
testthat::test_file("tests/testthat/rq.qte.R”)
}
>
q
``
1
testthat::test_file("tests/testthat/test-rq.qte.R”)
q
usethis::use_test("rdq.R")
usethis::use_test("summary.qte.R")
load_all()
load_all()
depa
depa(0)
load_all()
devtools::document()
devtools::install()
load_all()
devtools::manual()
devtools::document()
devtools::build_manual()
QTE.RD::rdq()
QTE.RD::rdq
QTE.RD::depa(0)
QTE.RD::make.band
QTE.RD::::make.band
QTE.RD:::make.band
load_all()
devtools::document()
devtools::build_manual()
load_all()
load_all()
load_all()
list.files(all.files = TRUE)
unlink("..pdf", recursive = TRUE)
load_all()
load_all()
library(devtools)
load_all()
usethis::use_test("rdq.band")
usethis::use_test("rdq.band.R")
rlang::last_trace()
testthat::test_file("tests/testthat/test-rdq.band.R”)
q
1
``
q
w
a
getwd()
testthat::test_file("tests/testthat/test-rdq.band.R")
testthat::test_file("tests/testthat/test-rd.qte.R")
testthat::test_file("tests/testthat/test-rdq.R")
testthat::test_file("tests/testthat/test-summary.qte.R")
testthat::test_file("tests/testthat/test-rdq.band.R")
testthat::test_file("tests/testthat/test-rdq.band.R")
testthat::test_file("tests/testthat/test-rdq.band.R")
testthat::test_file("tests/testthat/test-rdq.band.R")
testthat::test_file("tests/testthat/test-rdq.band.R")
testthat::test_file("tests/testthat/test-rdq.band.R")
testthat::test_file("tests/testthat/test-rdq.band.R")
testthat::test_file("tests/testthat/test-rdq.band.R")
testthat::test_file("tests/testthat/test-rdq.band.R")
testthat::test_file("tests/testthat/test-rdq.band.R")
testthat::test_file("tests/testthat/test-rdq.band.R")
load_all()
load_all()
load_all()
load_all()
load_all()
library(devtools)
load_all()
library(devtools)
load_all()
usethis::use_test("rdq.bias.R")
usethis::use_test("rdq.condf.R")
usethis::use_test("rdq.sim.R")
library(devtools)
load_all()
load_all()
usethis::use_test(“rdq.test.R”)
usethis::use_test("rdq.test.R")
usethis::use_test("rdq.bandwidth.R")
library(devtools)
load_all()
usethis::use_test("run.test.R")
load_all()
load_all()
library(devtools)
load_all()
load_all()
load_all()
library(devtools)
load_all()
load_all()
usethis::use_test("plot.qte.R")
library(devtools)
load_all()
usethis::use_r("compute.bands")
usethis::use_r("compute.bands.R")
load_all()
usethis::use_test("make.band.R")
usethis::use_test("make.band.cq.R")
load_all()
devtools::test()
devtools::document()
devtools::build_manual()
library(devtools)
load_all()
library(devtools)
load_all()
usethis::use_vignette("QTE.RD")
usethis::use_vignette("QTE_RD")
install.packages("QTE.RD_1.2.0.tar.gz",repos=NULL,type="source")
getwd()
library(devtools)
load_all()
devtools:document()
devtool:document()
devtools::document()
devtools::build_manual()
load_all()
devtools::document()
devtools::build_manual()
data("ddk_2011")
ddk
ddk_2011
library(devtools)
load_all()
library(devtools)
load_all()
library(devtools)
load_all()
data("ddk_2011")
set.seed(11445)
trk <- ddk$tracking		# schools sampled for tracking
trk <- ddk_2011$tracking		# schools sampled for tracking
con <- ddk_2011$etpteacher		# students assigned to a contract teacher
low <- ddk_2011$lowstream		# students assigned to low-ability class (in tracking schools)
hgh <- ddk_2011$highstream		# students assigned to high-ability class (in tracking schools)
yy  <- ddk_2011$ts_std			# endline total score
xx  <- ddk_2011$percentile		# percentile rank from the initial test
yc <- yy[trk==1]
xc <- xx[trk==1]
dc <- hgh[trk==1]	# high-ability section (if tracking schools)
x0 <- 50
tlevel <- 1:9/10
hh <- 20
A <- rd.qte(y=yc,x=xc,d=dc,x0,z0=NULL,tau=tlevel,bdw=hh,bias=1)
A2 <- summary(A,alpha=0.1)
A2
y.text <- "test scores"
m.text <- "Effects of assignment to lower vs. upper sections"
plot(A2,ytext=y.text,mtext=m.text)
# conditional quantiles plot
y.text <- "test scores"
m.text <- "Conditional quantile functions"
sub.text <- c("Upper section","Lower section")
plot(A2,ptype=2,ytext=y.text,mtext=m.text,subtext=sub.text)
# hypothesis tests
B <- rdq.test(y=yc,x=xc,d=dc,x0,z0=NULL,tau=tlevel,bdw=hh,bias=1,alpha=c(0.1,0.05),type=c(1,2,3,4),std.opt=1)
B
C <- rdq.bandwidth(y=yc,x=xc,d=dc,x0,z0=NULL,cv=1,val=(5:20),hp=10,pm.each=0,bdy=1,p.order=1,xl=0.5)
C
zc <- ddk$girl[trk==1]
zc <- ddk_2011$girl[trk==1]
z.eval <- c(0,1)
A <- rd.qte(y=yc,x=cbind(xc,zc),d=dc,x0,z0=z.eval,tau=tlevel,bdw=hh,bias=1)
A2 <- summary(A,alpha=0.1)
A2
# QTE plot
y.text <- "test scores"
m.text <- c("Boys","Girls")
plot(A2,ytext=y.text,mtext=m.text)
# Conditional quantile plots
y.text <- "test scores"
m.text <- c("Boys","Girls")
sub.text <- c("Upper section","Lower section")
plot(A2,ptype=2,ytext=y.text,mtext=m.text,subtext=sub.text)
B <- rdq.test(y=yc,x=cbind(xc,zc),d=dc,x0,z0=z.eval,tau=tlevel,bdw=hh,bias=1,alpha=c(0.1,0.05),type=c(1,2,3,4))
B
# bandwidth selection
C <- rdq.bandwidth(y=yc,x=cbind(xc,zc),d=dc,x0,z0=z.eval,cv=1,val=(5:20),hp=10,pm.each=0,bdy=1,p.order=1,xl=0.5)
C
# uniform bands with and without bias correction
D <- rdq.band(y=yc,x=cbind(xc,zc),d=dc,x0,z0=z.eval,tau=tlevel,bdw=hh,alpha=0.1)
D
x0 <- 50
dr <- trk
A <- rd.qte(y=yy,x=xx,d=dr,x0,z0=NULL,tau=tlevel,bdw=hh,bias=1)
A2 <- summary(A,alpha=0.1)
A2
A <- rd.qte(y=yy,x=xx,d=dr,x0=20,z0=NULL,tau=tlevel,bdw=hh,bias=1)
A <- rd.qte(y=yy,x=xx,d=dr,x0=80,z0=NULL,tau=tlevel,bdw=hh,bias=1)
zw <- cbind(ddk$girl,con)
zw <- cbind(ddk_2011$girl,con)
z.eval <- cbind(rep(c(0,1),2),rep(c(0,1),each=2))
A <- rd.qte(y=yy,x=cbind(xx,zw),d=dr,x0=50,z0=z.eval,tau=tlevel,bdw=hh,bias=1)
A2 <- summary(A,alpha=0.1)
# QTE plot
m.text <- c("boys & regular teachers","girls & regular teachers","boys & contract teachers","girls & contract teachers")
plot(A2,ytext=y.text,mtext=m.text)
zw <- ddk$agetest
zw <- ddk_2011$agetest
z.eval <- c(7,9,10,11)
A <- rd.qte(y=yy,x=cbind(xx,zw),d=dr,x0=50,z0=z.eval,tau=tlevel,bdw=hh,bias=1)
A2 <- summary(A,alpha=0.1)
A2
B <- rdq.test(y=yy,x=cbind(xx,zw),d=dr,x0=50,z0=z.eval,tau=tlevel,bdw=hh,bias=1,alpha=c(0.1,0.05),type=c(1,2,3,4))
B
library(devtools)
load_all()
devtools::documents()
devtools::document()
devtools::build_manual()
load_all()
devtools::document()
devtools::build_manual()
library(devtools)
load_all()
devtools::document()
devtools::build_manual()
devtools::check()
load_all()
devtools::document()
load_all()
devtools::document()
load_all()
devtools::document()
devtools::check()
pkgdown::build_site()
library(devtools)
load_all()
library("devtools")
load_all()
devtools::document()
devtools::build_manual()
pkgdown::build_site()
library(devtools)
load_all()
library(QTE.RD)
data("ddk_2011")
set.seed(11445)
trk <- ddk_2011$tracking		# schools sampled for tracking
con <- ddk_2011$etpteacher		# students assigned to a contract teacher
hgh <- ddk_2011$highstream		# students assigned to high-ability class (in tracking schools)
yy  <- ddk_2011$ts_std			# endline total score
xx  <- ddk_2011$percentile		# percentile rank from the initial test
yc <- yy[trk==1]
xc <- xx[trk==1]
dc <- hgh[trk==1]	# high-ability section (if tracking schools)
x0 <- 50
tlevel <- 1:9/10
hh <- 20
A <- rd.qte(y=yc,x=xc,d=dc,x0,z0=NULL,tau=tlevel,bdw=hh,bias=1)
A2 <- summary(A,alpha=0.1)
A2
y.text <- "test scores"
m.text <- "Effects of assignment to lower vs. upper sections"
plot(A2,ytext=y.text,mtext=m.text)
y.text <- "test scores"
m.text <- "Conditional quantile functions"
sub.text <- c("Upper section","Lower section")
plot(A2,ptype=2,ytext=y.text,mtext=m.text,subtext=sub.text)
B <- rdq.test(y=yc,x=xc,d=dc,x0,z0=NULL,tau=tlevel,bdw=hh,bias=1,alpha=c(0.1,0.05),type=c(1,2,3,4),std.opt=1)
B
C <- rdq.bandwidth(y=yc,x=xc,d=dc,x0,z0=NULL,cv=1,val=(5:20))
C
zc <- ddk_2011$girl[trk==1]
z.eval <- c(0,1)
A <- rd.qte(y=yc,x=cbind(xc,zc),d=dc,x0,z0=z.eval,tau=tlevel,bdw=hh,bias=1)
A2 <- summary(A,alpha=0.1)
A2
# QTE plot
y.text <- "test scores"
m.text <- c("Boys","Girls")
plot(A2,ytext=y.text,mtext=m.text)
y.text <- "test scores"
m.text <- c("Boys","Girls")
sub.text <- c("Upper section","Lower section")
plot(A2,ptype=2,ytext=y.text,mtext=m.text,subtext=sub.text)
B <- rdq.test(y=yc,x=cbind(xc,zc),d=dc,x0,z0=z.eval,tau=tlevel,bdw=hh,bias=1,alpha=c(0.1,0.05),type=c(1,2,3,4))
B
C <- rdq.bandwidth(y=yc,x=cbind(xc,zc),d=dc,x0,z0=z.eval,cv=1,val=(5:20),hp=10)
C
D <- rdq.band(y=yc,x=cbind(xc,zc),d=dc,x0,z0=z.eval,tau=tlevel,bdw=hh,alpha=0.1)
D <- rdq.band(y=yc,x=cbind(xc,zc),d=dc,x0,z0=z.eval,tau=tlevel,bdw=hh,alpha=0.1)
D
zc <- con[trk==1]
z.eval <- c(0,1)
A <- rd.qte(y=yc,x=cbind(xc,zc),dc,x0,z0=z.eval,tau=tlevel,bdw=hh,bias=1)
A2 <- summary(A,alpha=0.1)
A2
B <- rdq.test(y=yc,x=cbind(xc,zc),dc,x0,z0=z.eval,tau=tlevel,bdw=hh,bias=1,alpha=c(0.1,0.05),type=c(1,2,3,4))
B
x0 <- 50
dr <- trk
A <- rd.qte(y=yy,x=xx,d=dr,x0,z0=NULL,tau=tlevel,bdw=hh,bias=1)
A2 <- summary(A,alpha=0.1)
A2
# QTE plot
y.text = "test scores"
m.text = "Effects of tracking"
plot(A2,ytext=y.text,mtext=m.text)
m.text <- "Conditional quantile functions"
sub.text <- c("Tracking schools","Non-tracking schools")
plot(A2,ptype=2,ytext=y.text,mtext=m.text,subtext=sub.text)
B <- rdq.test(y=yy,x=xx,d=dr,x0,z0=NULL,tau=tlevel,bdw=hh,bias=1,alpha=c(0.1,0.05),type=c(1,2,3,4))
B
zw <- con
z.eval <- c(0,1)
A <- rd.qte(y=yy,x=cbind(xx,zw),d=dr,x0,z0=z.eval,tau=tlevel,bdw=hh,bias=1)
A2 <- summary(A,alpha=0.1)
A2
y.text <- "test scores"
m.text <- c("regular teachers","contract teachers")
plot(A2,ytext=y.text,mtext=m.text)
zw <- ddk_2011$girl
z.eval <- c(0,1)
A <- rd.qte(y=yy,x=cbind(xx,zw),d=dr,x0,z0=z.eval,tau=tlevel,bdw=hh,bias=1)
A2 <- summary(A,alpha=0.1)
A2
zw <- cbind(ddk_2011$girl,con)
z.eval <- cbind(rep(c(0,1),2),rep(c(0,1),each=2))
A <- rd.qte(y=yy,x=cbind(xx,zw),d=dr,x0=50,z0=z.eval,tau=tlevel,bdw=hh,bias=1)
A2 <- summary(A,alpha=0.1)
# QTE plot
m.text <- c("boys & regular teachers","girls & regular teachers","boys & contract teachers","girls & contract teachers")
plot(A2,ytext=y.text,mtext=m.text)
zw <- ddk_2011$agetest
z.eval <- c(7,9,10,11)
A <- rd.qte(y=yy,x=cbind(xx,zw),d=dr,x0=50,z0=z.eval,tau=tlevel,bdw=hh,bias=1)
A2 <- summary(A,alpha=0.1)
y.text <- "test scores"
m.text <- c("age 7","age 9","age 10","age 12")
plot(A2,ytext=y.text,mtext=m.text)
B <- rdq.test(y=yy,x=cbind(xx,zw),d=dr,x0=50,z0=z.eval,tau=tlevel,bdw=hh,bias=1,alpha=c(0.1,0.05),type=c(1,2,3,4))
B
library(devtools)
load_all
load_all()
devtools:document()
devtools:document()
devtools::document()
devtools::build_manual()
devtools::document()
devtools::build_manual()
load_all()
devtools::document()
devtools::build_manual()
load_all()
data("ddk_2011")
set.seed(11445)
# Define variables
trk <- ddk_2011$tracking		# schools sampled for tracking
con <- ddk_2011$etpteacher		# students assigned to a contract teacher
hgh <- ddk_2011$highstream		# students assigned to high-ability class (in tracking schools)
yy  <- ddk_2011$ts_std			# endline total score
xx  <- ddk_2011$percentile		# percentile rank from the initial test
yc <- yy[trk==1]
xc <- xx[trk==1]
dc <- hgh[trk==1]	# high-ability section (if tracking schools)
x0 <- 50
tlevel <- 1:9/10
hh <- 20
# 1.1. RDD without covariate
# unconditional effects
A <- rd.qte(y=yc,x=xc,d=dc,x0,z0=NULL,tau=tlevel,bdw=hh,bias=1)
A2 <- summary(A,alpha=0.1)
A2
# QTE plot
y.text <- "test scores"
m.text <- "Effects of assignment to lower vs. upper sections"
plot(A2,ytext=y.text,mtext=m.text)
# conditional quantiles plot
y.text <- "test scores"
m.text <- "Conditional quantile functions"
sub.text <- c("Upper section","Lower section")
plot(A2,ptype=2,ytext=y.text,mtext=m.text,subtext=sub.text)
B <- rdq.test(y=yc,x=xc,d=dc,x0,z0=NULL,tau=tlevel,bdw=hh,bias=1,alpha=c(0.1,0.05),type=c(1,2,3,4))
B
C <- rdq.bandwidth(y=yc,x=xc,d=dc,x0,z0=NULL,cv=1,val=(5:20))
C
# 1.2. RDD, boys vs. girls
# group-specific effects
zc <- ddk_2011$girl[trk==1]
z.eval <- c(0,1)
A <- rd.qte(y=yc,x=cbind(xc,zc),d=dc,x0,z0=z.eval,tau=tlevel,bdw=hh,bias=1)
A2 <- summary(A,alpha=0.1)
A2
# QTE plot
y.text <- "test scores"
m.text <- c("Boys","Girls")
plot(A2,ytext=y.text,mtext=m.text)
y.text <- "test scores"
m.text <- c("Boys","Girls")
sub.text <- c("Upper section","Lower section")
plot(A2,ptype=2,ytext=y.text,mtext=m.text,subtext=sub.text)
B <- rdq.test(y=yc,x=cbind(xc,zc),d=dc,x0,z0=z.eval,tau=tlevel,bdw=hh,bias=1,alpha=c(0.1,0.05),type=c(1,2,3,4))
B
C <- rdq.bandwidth(y=yc,x=cbind(xc,zc),d=dc,x0,z0=z.eval,cv=1,val=(5:20))
C
D <- rdq.band(y=yc,x=cbind(xc,zc),d=dc,x0,z0=z.eval,tau=tlevel,bdw=hh,alpha=0.1)
D
# 2.1. Without covariate
x0 <- 50
dr <- trk
A <- rd.qte(y=yy,x=xx,d=dr,x0,z0=NULL,tau=tlevel,bdw=hh,bias=1)
A2 <- summary(A,alpha=0.1)
A2
# QTE plot
y.text = "test scores"
m.text = "Effects of tracking"
plot(A2,ytext=y.text,mtext=m.text)
m.text <- "Conditional quantile functions"
sub.text <- c("Tracking schools","Non-tracking schools")
plot(A2,ptype=2,ytext=y.text,mtext=m.text,subtext=sub.text)
B <- rdq.test(y=yy,x=xx,d=dr,x0,z0=NULL,tau=tlevel,bdw=hh,bias=1,alpha=c(0.1,0.05),type=c(1,2,3,4))
B
# try x0 = 20 or 80
A <- rd.qte(y=yy,x=xx,d=dr,x0=20,z0=NULL,tau=tlevel,bdw=hh,bias=1)
A <- rd.qte(y=yy,x=xx,d=dr,x0=80,z0=NULL,tau=tlevel,bdw=hh,bias=1)
zw <- cbind(ddk_2011$girl,con)
z.eval <- cbind(rep(c(0,1),2),rep(c(0,1),each=2))
A <- rd.qte(y=yy,x=cbind(xx,zw),d=dr,x0=50,z0=z.eval,tau=tlevel,bdw=hh,bias=1)
A2 <- summary(A,alpha=0.1)
# QTE plot
m.text <- c("boys & regular teachers","girls & regular teachers","boys & contract teachers","girls & contract teachers")
plot(A2,ytext=y.text,mtext=m.text)
zw <- ddk_2011$agetest
z.eval <- c(7,9,10,11)
A <- rd.qte(y=yy,x=cbind(xx,zw),d=dr,x0=50,z0=z.eval,tau=tlevel,bdw=hh,bias=1)
A2 <- summary(A,alpha=0.1)
# QTE plot
y.text <- "test scores"
m.text <- c("age 7","age 9","age 10","age 12")
plot(A2,ytext=y.text,mtext=m.text)
load_all()
devtools::manual()
devtools::document()
devtools::check()
devtools::manual()
devtools::document()
devtools::check()
devtools::build_manual()
devtools::check_as_cran()
use_release_issue()
rhub::check_for_cran()
httr::set_config(httr::config(ssl_verifypeer = 0L))
rhub::check_for_cran()
library(devtools)
rhub::check_for_cran()
library(devtools)
library("devtools")
install.packages("devtools")
library(devtools)
load_all()
load_all()
devtools::document()
devtools::build_manual()
devtools::check()
rhub::check_for_cran()
install.packages(rhub)
install.packages("rhub")
library(rhub)
rhub::check_for_cran()
rhubv2::check_for_cran()
?rhubv2
rhub_setup()
rhub::rhub_setup()
rhub::rhub_doctor()
gitcreds::gitcreds_set()
rhub::rhub_check()
load_all()
devtools::submit_cran()
library(devtools)
load_all()
devtools::install("/Users/jyoon/Dropbox/work.in.progress/make_R_packages/make_QTE_RD/QTE.RD")
install.packages("/Users/jyoon/Dropbox/work.in.progress/make_R_packages/make_QTE_RD/QTE.RD", repos = NULL, type = "source")
load_all()
install.packages("/Users/jyoon/Dropbox/work.in.progress/make_R_package/make_QTE_RD/QTE.RD", repos = NULL, type = "source")
paths <- c("vignettes","man","inst/doc","README.md")
files <- unlist(lapply(paths[file.exists(paths)], function(p)
list.files(p, pattern="\\.(Rmd|rmd|Rnw|Rd|html|md)$", recursive=TRUE, full.names=TRUE)
))
find_hits <- function(pattern) {
do.call(rbind, lapply(files, function(f) {
x <- readLines(f, warn = FALSE)
idx <- grep(pattern, x)
if (length(idx)) data.frame(file=f, line=idx, text=x[idx], pattern=I(pattern))
}))
}
bad <- rbind(
find_hits("\\\\doi\\{"),           # \doi{...}
find_hits("https?://[^\\s]*\\\\_") # URLs containing \_
)
bad
load_all()
devtools::manual()
devtools::document()
devtools::build_manual()
devtools::submit_cran()
pkgdown::build_site()
